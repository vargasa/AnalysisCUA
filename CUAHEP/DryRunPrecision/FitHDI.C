int FitHDI() {

  std::vector<std::pair<double,double>> x_hdi = {
    {250.200846,250.056429},
    {250.200867,250.075430},
    {250.197704,250.065934},
    {250.199831,250.063798},
    {250.200905,250.068035},
    {250.204018,250.077530},
    {250.198799,250.064851},
    {250.198735,250.040632},
    {250.200932,250.058510},
    {250.199797,250.066990},
    {250.192421,250.065880},
    {250.195604,250.039604},
    {250.199905,250.057489},
    {250.193490,250.047999},
    {250.198756,250.063851},
  };

  std::vector<std::pair<double,double>> y_hdi = {
    {571.159259,529.659109},
    {571.159271,529.667579},
    {571.148667,529.665450},
    {571.160310,529.665463},
    {571.153966,529.658041},
    {571.161395,529.665463},
    {571.144416,529.661213},
    {571.162492,529.665455},
    {571.159269,529.661521},
    {571.146544,529.656968},
    {571.159269,529.664408},
    {571.160323,529.664394},
    {571.155030,529.659095},
    {571.155037,529.670759},
    {571.149715,529.661229}
  };

  std::vector<std::pair<double,double>> x_glass = {
    {248.787301,248.682966},
    {248.789497,248.673479},
    {248.788398,248.688215},
    {248.787346,248.649208},
    {248.785255,248.681900},
    {248.794730,248.679806},
    {248.793648,248.685067},
    {248.782100,248.677777},
    {248.787358,248.682949},
    {248.797882,248.687188},
    {248.784162,248.675602},
    {248.777854,248.679831},
    {248.787399,248.686133},
    {248.784179,248.672446},
    {248.798970,248.674510},
  };

  std::vector<std::pair<double,double>> y_glass = {
    {571.210157,529.597589},
    {571.212243,529.605017},
    {571.200614,529.588050},
    {571.192141,529.580618},
    {571.208029,529.596530},
    {571.208039,529.597588},
    {571.208034,529.596511},
    {571.209107,529.595470},
    {571.210124,529.596548},
    {571.195335,529.580633},
    {571.202726,529.591232},
    {571.204878,529.593355},
    {571.205907,529.590160},
    {571.216516,529.607122},
    {571.209106,529.596551},
  };

  std::function<TF1*(double*,double*)> GetFit = [](double* x, double* y, const int n = 2) {
    TGraph *g = new TGraph(n,x,y);
    g->SetMarkerStyle(22);
    TF1* mx = new TF1("p1","pol1",200,300);
    g->Fit(mx,"MRQ");
    return mx;
  };


  auto printFit = [&] (std::vector<std::pair<double,double>>* x, std::vector<std::pair<double,double>>* y) {
    const int n = x->size();
    std::vector<double> angles;
    for (int i = 0; i < n ; ++i){
      double xx[2] = {(*x)[i].first, (*x)[i].second};
      double yy[2] = {(*y)[i].first, (*y)[i].second};
      TF1* fit = GetFit(xx,yy);
      double b = fit->GetParameter(0);
      double m = fit->GetParameter(1);
      angles.emplace_back(atan(m)*(360/(2*3.14159)));
      std::clog << Form("\t%.6f\n",angles[i]);
    }
    return angles;
  };

  std::vector<double> hdiAngle = printFit(&x_hdi,&y_hdi);
  std::vector<double> ghAngle = printFit(&x_glass,&y_glass);

  TH1F* hDiff = new TH1F("hDiff","HDI - GlassHeater;Angle Difference [Degrees];Count",20,-0.2,0.2);

  for(int i = 0; i < hdiAngle.size(); ++i){
    hDiff->Fill(hdiAngle[i] - ghAngle[i]);
  }

  TCanvas* c1 = new TCanvas("c1","c1",500,500);
  hDiff->Draw("HIST");
  c1->Print("test.png");

  return 0;
}
